{"ast":null,"code":"import React,{Fragment}from\"react\";import randomcolor from\"randomcolor\";import{useParams}from\"react-router-dom\";import\"../components/styles/style.css\";import PlayArrowIcon from'@material-ui/icons/PlayArrow';import{ReactSearchAutocomplete}from\"react-search-autocomplete\";import SearchIcon from\"@material-ui/icons/Search\";import Breadcrumbs from\"@material-ui/core/Breadcrumbs\";import Typography from\"@material-ui/core/Typography\";import Link from\"@material-ui/core/Link\";import Lottie from\"react-lottie\";import Orgtree from\"../lottie/org-tree.json\";import config from'../config';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chart=function Chart(_ref){var empData=_ref.empData;var params=useParams();var BreadcrumbsArr=[];var head=[];window.sessionStorage.setItem(\"OrgLevel\",1);var ReportingPeople=function ReportingPeople(EmpName){if(JSON.parse(window.sessionStorage.getItem(EmpName+\" Reporting\"))){return JSON.parse(window.sessionStorage.getItem(EmpName+\" Reporting\"));}var ReportingPeopleArr=[];var match=false;for(var i=0;i<empData.length;i++){var matching=false;if(!match&&empData[i].reports_to.includes(EmpName)){//checking for a match\nReportingPeopleArr.push(empData[i]);match=true;matching=true;}else if(match&&empData[i].reports_to.includes(EmpName)){//after having match all the reporting employee will be in group\nReportingPeopleArr.push(empData[i]);matching=true;}if(match&&!matching){//when the sequence of reporters broken then return the array\nwindow.sessionStorage.setItem(EmpName+\" Reporting\",JSON.stringify(ReportingPeopleArr));return ReportingPeopleArr;}}return ReportingPeopleArr;};var ReportsTo=function ReportsTo(Emp){var reportsTo=Emp[0].reports_to;var AllReportsToArr=[];if(reportsTo){while(!reportsTo.includes(\"Srinivasan Gopal\")){var ReportsToArr=[];if(JSON.parse(window.sessionStorage.getItem(reportsTo))){ReportsToArr=JSON.parse(window.sessionStorage.getItem(reportsTo));AllReportsToArr.push(ReportsToArr[0]);}else{for(var i=0;i<empData.length;i++){if(empData[i].name.includes(reportsTo)){ReportsToArr.push(empData[i]);AllReportsToArr.push(empData[i]);window.sessionStorage.setItem(empData[i].name,JSON.stringify(ReportsToArr));window.sessionStorage.setItem(\"ReportsTo\",JSON.stringify(ReportsToArr));}}}reportsTo=ReportsToArr[0].reports_to;}}var CEO=[{name:\"Srinivasan Gopal\",emp_id:\"0001\",role:\"Chief Executive Officer\",DP:\"/sites/default/files/default_images/DefaultDp_0.png\"}];AllReportsToArr.push(CEO[0]);AllReportsToArr.reverse();// console.log(AllReportsToArr);\nreturn AllReportsToArr;};var EmpDetails=function EmpDetails(EmpName){var ReportsToArr=[];for(var i=0;i<empData.length;i++){if(empData[i].name.includes(EmpName)){ReportsToArr.push(empData[i]);// console.log(ReportsToArr);\nreturn ReportsToArr;}}var CEO=[{name:\"Srinivasan Gopal\",emp_id:\"0001\",role:\"Chief Executive Officer\",DP:\"/sites/default/files/default_images/DefaultDp_0.png\"}];return CEO;};//org chart level array initializations 2 cases for CEO and rem emp\nif(params.Emp===\"Srinivasan Gopal\"){//2 levels\nhead=[{name:\"Srinivasan Gopal\",emp_id:\"0001\",role:\"Chief Executive Officer\",DP:\"/sites/default/files/default_images/DefaultDp_0.png\"}];var Presidents=ReportingPeople(params.Emp);window.sessionStorage.setItem(\"ReportsTo\",JSON.stringify(head));window.sessionStorage.setItem(head[0].name,JSON.stringify(head));for(var i=0;i<Presidents.length;i++){var EmpArr=[];EmpArr.push(Presidents[i]);window.sessionStorage.setItem(Presidents[i].name,JSON.stringify(EmpArr));}head=Presidents;var Reporting=[];window.sessionStorage.setItem(\"Reporting\",JSON.stringify(Reporting));}else{// 3 levels for non ceo\nif(JSON.parse(window.sessionStorage.getItem(params.Emp))){head=JSON.parse(window.sessionStorage.getItem(params.Emp));// console.log(head);\n}else{head=EmpDetails(params.Emp);window.sessionStorage.setItem(params.Emp,JSON.stringify(head));// console.log(head);\n}// console.log(params.Emp);\n// console.log(head);\nvar EmpReportsTo=head[0].reports_to;// console.log(EmpReportsTo);\nwindow.sessionStorage.setItem(\"Reporting\",JSON.stringify(ReportingPeople(params.Emp)));BreadcrumbsArr=ReportsTo(head);if(EmpReportsTo){if(JSON.parse(window.sessionStorage.getItem(EmpReportsTo))){// if reports to data is stored in SS then no loop\nvar ReportsToArr=[];ReportsToArr=JSON.parse(window.sessionStorage.getItem(EmpReportsTo));window.sessionStorage.setItem(\"ReportsTo\",JSON.stringify(ReportsToArr));}else{var EmpReportsToDetails=EmpDetails(EmpReportsTo);window.sessionStorage.setItem(EmpReportsTo,JSON.stringify(EmpReportsToDetails));window.sessionStorage.setItem(\"ReportsTo\",JSON.stringify(EmpReportsToDetails));}}else{var Ceo=[{name:\"Srinivasan Gopal\",emp_id:\"0001\",role:\"Chief Executive Officer\",DP:\"/sites/default/files/default_images/DefaultDp_0.png\"}];window.sessionStorage.setItem(\"ReportsTo\",JSON.stringify(Ceo));}}// console.log(window.sessionStorage.getItem(\"ReportsTo\"));\n// console.log(window.sessionStorage.getItem(\"Reporting\"));\nvar handleOnSelect=function handleOnSelect(Emp){// the item selected\nvar EmpArr=[];EmpArr.push(Emp);window.sessionStorage.removeItem(\"ReportsTo\");var name=Emp.name;window.sessionStorage.setItem(name,JSON.stringify(EmpArr));window.location.href=\"/org-chart/\"+name;// console.log(Emp);\n};var defaultOptions={loop:true,autoplay:true,animationData:Orgtree,rendererSettings:{preserveAspectRatio:\"xMidYMid slice\"}};var formatResult=function formatResult(item){return item;};return/*#__PURE__*/_jsxs(\"div\",{className:\"org-container\",children:[params.Emp===\"Srinivasan Gopal\"?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsxs(Breadcrumbs,{maxItems:2,\"aria-label\":\"breadcrumb\",children:[BreadcrumbsArr.map(function(item,index){return/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"/org-chart/\".concat(item.name),children:item.name},index);}),/*#__PURE__*/_jsx(Typography,{style:{color:\"#2c5c6d\",fontWeight:\"700\"},children:params.Emp})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchWidget\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"searchIcon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"SearchAutocomplete\",children:/*#__PURE__*/_jsx(ReactSearchAutocomplete,{items:empData,onSelect:handleOnSelect,autoFocus:true,formatResult:formatResult})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"org-tree\",children:/*#__PURE__*/_jsx(Card,{data:head})}),/*#__PURE__*/_jsx(Lottie,{options:defaultOptions,style:{margin:\"0\",left:\"0\",bottom:\"0%\",top:\"90%\",position:\"absolute\",height:\"35%\",width:\"25%\",cursor:\"default\",zIndex:\"0\",paddingBottom:\"2%\"}})]});};export default Chart;var Card=function Card(props){var levelColor=randomcolor();// console.log(props);\n//get the new emp details of desired emp (clicked) and show his org chart\nvar newChart=function newChart(Emp){var EmpArr=[];EmpArr.push(JSON.parse(Emp));window.sessionStorage.removeItem(\"ReportsTo\");var name=JSON.parse(Emp).name;window.sessionStorage.setItem(name,JSON.stringify(EmpArr));window.location.href=\"/org-chart/\"+name;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{children:JSON.parse(window.sessionStorage.getItem(\"ReportsTo\")).map(function(item,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(config.drupal_url,\"/\").concat(item.DP),alt:\"Profile\",style:{borderColor:levelColor}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard-body\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-profile-container\",children:[/*#__PURE__*/_jsx(\"h4\",{title:item.name,className:\"OrgCard-body-h4\",children:item.name.length>22?item.name.split(\" \")[0]:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"empProfileNav\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/employee-details/\"+item.emp_id,className:\"playBut\",children:/*#__PURE__*/_jsx(PlayArrowIcon,{className:\"playIcon\"})})})]}),/*#__PURE__*/_jsx(\"p\",{title:item.role,className:\"OrgCard-body-p\",children:item.role.length>28?item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1):item.role})]})]}),/*#__PURE__*/_jsx(\"ul\",{children:props.data.map(function(item,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(config.drupal_url,\"/\").concat(item.DP),alt:\"Profile\",style:{borderColor:levelColor}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard-body\",id:\"selected-node\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-profile-container\",children:[/*#__PURE__*/_jsx(\"h4\",{title:item.name,className:\"OrgCard-body-h4\",children:item.name.length>22?item.name.split(\" \")[0]:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"empProfileNav\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/employee-details/\"+item.emp_id,className:\"playBut\",children:/*#__PURE__*/_jsx(PlayArrowIcon,{className:\"playIcon\"})})})]}),/*#__PURE__*/_jsx(\"p\",{title:item.role,className:\"OrgCard-body-p\",children:item.role.length>28?item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1):item.role})]})]}),JSON.parse(window.sessionStorage.getItem(\"Reporting\")).length>0?JSON.parse(window.sessionStorage.getItem(\"Reporting\")).length===1?/*#__PURE__*/_jsx(\"ul\",{children:JSON.parse(window.sessionStorage.getItem(\"Reporting\")).map(function(item,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(config.drupal_url,\"/\").concat(item.DP),alt:\"Profile\",style:{borderColor:levelColor}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard-body\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-profile-container\",children:[/*#__PURE__*/_jsx(\"h4\",{title:item.name,className:\"OrgCard-body-h4\",children:item.name.length>22?item.name.split(\" \")[0]:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"empProfileNav\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/employee-details/\"+item.emp_id,className:\"playBut\",children:/*#__PURE__*/_jsx(PlayArrowIcon,{className:\"playIcon\"})})})]}),/*#__PURE__*/_jsx(\"p\",{title:item.role,className:\"OrgCard-body-p\",children:item.role.length>28?item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0)+item.role.split(\" \")[1].substring(0):item.role.split(\" \")[0].substring(0)+item.role.split(\" \")[1].substring(0)+item.role.split(\" \")[2].substring(0):item.role})]})]})},index)},item.name);})}):/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"selected-team\",children:JSON.parse(window.sessionStorage.getItem(\"Reporting\")).map(function(item,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"\",id:\"team-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard\",onClick:function onClick(){return newChart(JSON.stringify(item));},children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(config.drupal_url,\"/\").concat(item.DP),alt:\"Profile\",style:{borderColor:levelColor}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrgCard-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-profile-container\",children:[/*#__PURE__*/_jsx(\"h4\",{title:item.name,className:\"OrgCard-body-h4\",children:item.name.length>22?item.name.split(\" \")[0]:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"empProfileNav\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/employee-details/\"+item.emp_id,className:\"playBut\",children:/*#__PURE__*/_jsx(PlayArrowIcon,{className:\"playIcon\"})})})]}),/*#__PURE__*/_jsx(\"p\",{title:item.role,className:\"OrgCard-body-p\",children:item.role.length>28?item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1):item.role})]})]})},index)},item.name);})})}):/*#__PURE__*/_jsx(_Fragment,{})]},index)},item.name);})})]},index)},item.name);})})});};","map":{"version":3,"sources":["/home/raguram_s/lister-emp-portal/src/components/Chart.js"],"names":["React","Fragment","randomcolor","useParams","PlayArrowIcon","ReactSearchAutocomplete","SearchIcon","Breadcrumbs","Typography","Link","Lottie","Orgtree","config","Chart","empData","params","BreadcrumbsArr","head","window","sessionStorage","setItem","ReportingPeople","EmpName","JSON","parse","getItem","ReportingPeopleArr","match","i","length","matching","reports_to","includes","push","stringify","ReportsTo","Emp","reportsTo","AllReportsToArr","ReportsToArr","name","CEO","emp_id","role","DP","reverse","EmpDetails","Presidents","EmpArr","Reporting","EmpReportsTo","EmpReportsToDetails","Ceo","handleOnSelect","removeItem","location","href","defaultOptions","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","formatResult","item","map","index","color","fontWeight","margin","left","bottom","top","position","height","width","cursor","zIndex","paddingBottom","Card","props","levelColor","newChart","drupal_url","borderColor","split","substring","data"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\nimport randomcolor from \"randomcolor\";\nimport { useParams } from \"react-router-dom\";\nimport \"../components/styles/style.css\";\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { ReactSearchAutocomplete } from \"react-search-autocomplete\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Link from \"@material-ui/core/Link\";\nimport Lottie from \"react-lottie\";\nimport Orgtree from \"../lottie/org-tree.json\";\nimport config from '../config';\n\nconst Chart = ({ empData }) => {\n  let params = useParams();\n  let BreadcrumbsArr = [];\n\n  let head = [];\n  window.sessionStorage.setItem(\"OrgLevel\", 1);\n\n  const ReportingPeople = (EmpName) => {\n    if (JSON.parse(window.sessionStorage.getItem(EmpName + \" Reporting\"))) {\n      return JSON.parse(window.sessionStorage.getItem(EmpName + \" Reporting\"));\n    }\n\n    let ReportingPeopleArr = [];\n    let match = false;\n    for (let i = 0; i < empData.length; i++) {\n      let matching = false;\n      if (!match && empData[i].reports_to.includes(EmpName)) {\n        //checking for a match\n        ReportingPeopleArr.push(empData[i]);\n        match = true;\n        matching = true;\n      } else if (match && empData[i].reports_to.includes(EmpName)) {\n        //after having match all the reporting employee will be in group\n        ReportingPeopleArr.push(empData[i]);\n        matching = true;\n      }\n\n      if (match && !matching) {\n        //when the sequence of reporters broken then return the array\n        window.sessionStorage.setItem(\n          EmpName + \" Reporting\",\n          JSON.stringify(ReportingPeopleArr)\n        );\n        return ReportingPeopleArr;\n      }\n    }\n    return ReportingPeopleArr;\n  };\n\n  const ReportsTo = (Emp) => {\n    let reportsTo = Emp[0].reports_to;\n\n    let AllReportsToArr = [];\n\n    if (reportsTo) {\n      while (!reportsTo.includes(\"Srinivasan Gopal\")) {\n        let ReportsToArr = [];\n        if (JSON.parse(window.sessionStorage.getItem(reportsTo))) {\n          ReportsToArr = JSON.parse(window.sessionStorage.getItem(reportsTo));\n          AllReportsToArr.push(ReportsToArr[0]);\n        } else {\n          for (let i = 0; i < empData.length; i++) {\n            if (empData[i].name.includes(reportsTo)) {\n              ReportsToArr.push(empData[i]);\n              AllReportsToArr.push(empData[i]);\n              window.sessionStorage.setItem(\n                empData[i].name,\n                JSON.stringify(ReportsToArr)\n              );\n              window.sessionStorage.setItem(\n                \"ReportsTo\",\n                JSON.stringify(ReportsToArr)\n              );\n            }\n          }\n        }\n        reportsTo = ReportsToArr[0].reports_to;\n      }\n    }\n    let CEO = [\n      {\n        name: \"Srinivasan Gopal\",\n        emp_id: \"0001\",\n        role: \"Chief Executive Officer\",\n        DP: \"/sites/default/files/default_images/DefaultDp_0.png\",\n      },\n    ];\n    AllReportsToArr.push(CEO[0]);\n    AllReportsToArr.reverse();\n    // console.log(AllReportsToArr);\n    return AllReportsToArr;\n  };\n  const EmpDetails = (EmpName) => {\n    let ReportsToArr = [];\n    for (let i = 0; i < empData.length; i++) {\n      if (empData[i].name.includes(EmpName)) {\n        ReportsToArr.push(empData[i]);\n        // console.log(ReportsToArr);\n        return ReportsToArr;\n      }\n    }\n    let CEO = [\n      {\n        name: \"Srinivasan Gopal\",\n        emp_id: \"0001\",\n        role: \"Chief Executive Officer\",\n        DP: \"/sites/default/files/default_images/DefaultDp_0.png\",\n      },\n    ];\n\n    return CEO;\n  };\n  //org chart level array initializations 2 cases for CEO and rem emp\n  if (params.Emp === \"Srinivasan Gopal\") {\n    //2 levels\n    head = [\n      {\n        name: \"Srinivasan Gopal\",\n        emp_id: \"0001\",\n        role: \"Chief Executive Officer\",\n        DP: \"/sites/default/files/default_images/DefaultDp_0.png\",\n      },\n    ];\n\n    const Presidents = ReportingPeople(params.Emp);\n    window.sessionStorage.setItem(\"ReportsTo\", JSON.stringify(head));\n    window.sessionStorage.setItem(head[0].name, JSON.stringify(head));\n\n    for (let i = 0; i < Presidents.length; i++) {\n      let EmpArr = [];\n      EmpArr.push(Presidents[i]);\n      window.sessionStorage.setItem(Presidents[i].name, JSON.stringify(EmpArr));\n    }\n    head = Presidents;\n    let Reporting = [];\n    window.sessionStorage.setItem(\"Reporting\", JSON.stringify(Reporting));\n  } else {\n    // 3 levels for non ceo\n    if (JSON.parse(window.sessionStorage.getItem(params.Emp))) {\n      head = JSON.parse(window.sessionStorage.getItem(params.Emp));\n      // console.log(head);\n    } else {\n      head = EmpDetails(params.Emp);\n      window.sessionStorage.setItem(params.Emp, JSON.stringify(head));\n      // console.log(head);\n    }\n    // console.log(params.Emp);\n    // console.log(head);\n    let EmpReportsTo = head[0].reports_to;\n    // console.log(EmpReportsTo);\n    window.sessionStorage.setItem(\n      \"Reporting\",\n      JSON.stringify(ReportingPeople(params.Emp))\n    );\n\n    BreadcrumbsArr = ReportsTo(head);\n    if (EmpReportsTo) {\n      if (JSON.parse(window.sessionStorage.getItem(EmpReportsTo))) {\n        // if reports to data is stored in SS then no loop\n        let ReportsToArr = [];\n        ReportsToArr = JSON.parse(window.sessionStorage.getItem(EmpReportsTo));\n        window.sessionStorage.setItem(\n          \"ReportsTo\",\n          JSON.stringify(ReportsToArr)\n        );\n      } else {\n        let EmpReportsToDetails = EmpDetails(EmpReportsTo);\n        window.sessionStorage.setItem(\n          EmpReportsTo,\n          JSON.stringify(EmpReportsToDetails)\n        );\n        window.sessionStorage.setItem(\n          \"ReportsTo\",\n          JSON.stringify(EmpReportsToDetails)\n        );\n      }\n    } else {\n      let Ceo = [\n        {\n          name: \"Srinivasan Gopal\",\n          emp_id: \"0001\",\n          role: \"Chief Executive Officer\",\n          DP: \"/sites/default/files/default_images/DefaultDp_0.png\",\n        },\n      ];\n      window.sessionStorage.setItem(\"ReportsTo\", JSON.stringify(Ceo));\n    }\n  }\n  // console.log(window.sessionStorage.getItem(\"ReportsTo\"));\n  // console.log(window.sessionStorage.getItem(\"Reporting\"));\n\n  const handleOnSelect = (Emp) => {\n    // the item selected\n    let EmpArr = [];\n    EmpArr.push(Emp);\n    window.sessionStorage.removeItem(\"ReportsTo\");\n    let name = Emp.name;\n    window.sessionStorage.setItem(name, JSON.stringify(EmpArr));\n    window.location.href = \"/org-chart/\" + name;\n    // console.log(Emp);\n  };\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: Orgtree,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const formatResult = (item) => {\n    return item;\n  };\n  return (\n    <div className=\"org-container\">\n      {params.Emp === \"Srinivasan Gopal\" ? (\n        <></>\n      ) : (\n        <Breadcrumbs maxItems={2} aria-label=\"breadcrumb\">\n          {BreadcrumbsArr.map((item,index) => (\n            <Link color=\"inherit\" href={`/org-chart/${item.name}`} key={index}>\n              {item.name}\n            </Link>\n          ))}\n          <Typography  style={{ color: \"#2c5c6d\", fontWeight:\"700\" }} >{params.Emp}</Typography>\n        </Breadcrumbs>\n      )}\n      <div className=\"searchWidget\">\n        <SearchIcon className=\"searchIcon\"></SearchIcon>\n        <div className=\"SearchAutocomplete\" >\n          <ReactSearchAutocomplete\n            items={empData}\n            onSelect={handleOnSelect}\n            autoFocus\n            formatResult={formatResult}\n          />\n        </div>\n      </div>\n      <div className=\"org-tree\">\n        <Card data={head} />\n      </div>\n      <Lottie\n        options={defaultOptions}\n        style={{\n          margin: \"0\",\n          left: \"0\",\n          bottom: \"0%\",\n          top: \"90%\",\n          position: \"absolute\",\n          height: \"35%\",\n          width: \"25%\",\n          cursor: \"default\",\n          zIndex: \"0\",\n          paddingBottom: \"2%\",\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Chart;\n\nconst Card = (props) => {\n  const levelColor = randomcolor();\n  // console.log(props);\n  \n  //get the new emp details of desired emp (clicked) and show his org chart\n  const newChart = (Emp) => {\n    let EmpArr = [];\n    EmpArr.push(JSON.parse(Emp));\n    window.sessionStorage.removeItem(\"ReportsTo\");\n    let name = JSON.parse(Emp).name;\n    window.sessionStorage.setItem(name, JSON.stringify(EmpArr));\n    window.location.href = \"/org-chart/\" + name;\n  };\n\n  return (\n    <>\n      <ul>\n        {JSON.parse(window.sessionStorage.getItem(\"ReportsTo\")).map((item,index) => (\n          <Fragment key={item.name}>\n            <li key={index}>\n              <div\n                className=\"OrgCard\"\n               \n              >\n                <div className=\"image\"  onClick={() => newChart(JSON.stringify(item))}>\n                  {/* {console.log(item)} */}\n                  <img\n                    src={`${config.drupal_url}/${item.DP}`}\n                    alt=\"Profile\"\n                    style={{ borderColor: levelColor }}\n                  ></img>\n                </div>\n                <div className=\"OrgCard-body\"  onClick={() => newChart(JSON.stringify(item))}>\n                  <div className=\"name-profile-container\">\n                    <h4 title={item.name} className=\"OrgCard-body-h4\">{item.name.length>22?item.name.split(\" \")[0]:item.name}</h4>\n                    <p className=\"empProfileNav\">\n                      {/* {console.log(item.name.split(\" \")[0])} */}\n                    <a href={\"/employee-details/\" + item.emp_id} className='playBut'>\n                        <PlayArrowIcon className=\"playIcon\"></PlayArrowIcon>\n                      </a>\n                    </p>\n                  </div>\n                  <p title={item.role} className=\"OrgCard-body-p\">{item.role.length>28?(item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1)):item.role}</p>\n                </div>\n              </div>\n              <ul>\n                {props.data.map((item,index) => (\n                  <Fragment key={item.name}>\n                    <li key={index}>\n                      <div\n                        className=\"OrgCard\"\n                      \n                      >\n                        <div className=\"image\"   onClick={() => newChart(JSON.stringify(item))}>\n                          {/* {console.log(item)} */}\n                          <img\n                            src={`${config.drupal_url}/${item.DP}`}\n                            alt=\"Profile\"\n                            style={{ borderColor: levelColor }}\n                          ></img>\n                        </div>\n                        <div className=\"OrgCard-body\" id=\"selected-node\"   onClick={() => newChart(JSON.stringify(item))}>\n                          <div className=\"name-profile-container\">\n                            <h4 title={item.name} className=\"OrgCard-body-h4\">{item.name.length>22?item.name.split(\" \")[0]:item.name}</h4>\n                            <p className=\"empProfileNav\">\n                              <a href={\"/employee-details/\" + item.emp_id} className='playBut'>\n                                <PlayArrowIcon className=\"playIcon\"></PlayArrowIcon>\n                              </a>\n                            </p>\n                          </div>\n                          <p title={item.role} className=\"OrgCard-body-p\">{item.role.length>28?(item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1)):item.role}</p>\n                        </div>\n                      </div>\n                    {/* more than 1 childsin 3 rd level flat top border */}\n                      {JSON.parse(window.sessionStorage.getItem(\"Reporting\"))\n                        .length > 0 ? (\n                        JSON.parse(window.sessionStorage.getItem(\"Reporting\"))\n                          .length === 1 ? (\n                          <ul>\n                            {JSON.parse(\n                              window.sessionStorage.getItem(\"Reporting\")\n                            ).map((item,index) => (\n                              <Fragment key={item.name}>\n                                <li key={index}>\n                                  <div\n                                    className=\"OrgCard\"\n                                  \n                                  >\n                                    <div className=\"image\"   onClick={() =>\n                                      newChart(JSON.stringify(item))\n                                    }>\n                                      {/* {console.log(item)} */}\n                                      <img\n                                        src={`${config.drupal_url}/${item.DP}`}\n                                        alt=\"Profile\"\n                                        style={{ borderColor: levelColor }}\n                                      ></img>\n                                    </div>\n                                    <div className=\"OrgCard-body\"   onClick={() =>\n                                      newChart(JSON.stringify(item))\n                                    }>\n                                      <div className=\"name-profile-container\">\n                                        <h4 title={item.name} className=\"OrgCard-body-h4\">\n                                        {item.name.length>22?item.name.split(\" \")[0]:item.name}\n                                        </h4>\n                                        <p className=\"empProfileNav\">\n                                          <a href={\"/employee-details/\" + item.emp_id} className='playBut'>\n                                            <PlayArrowIcon className=\"playIcon\"></PlayArrowIcon>\n                                          </a>\n                                        </p>\n                                      </div>\n                                      <p title={item.role} className=\"OrgCard-body-p\">\n                                        {item.role.length>28?(item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0)+item.role.split(\" \")[1].substring(0):item.role.split(\" \")[0].substring(0)+item.role.split(\" \")[1].substring(0)+item.role.split(\" \")[2].substring(0)):item.role}\n                                      </p>\n                                    </div>\n                                  </div>\n                                </li>\n                              </Fragment>\n                            ))}\n                          </ul>\n                        ) : (\n                          <ul>\n                         \n                            <div className=\"selected-team\">\n                              {JSON.parse(\n                                window.sessionStorage.getItem(\"Reporting\")\n                              ).map((item,index) => (\n                                <Fragment key={item.name}>\n                                 \n                                  <div className=\"\" id=\"team-card\" key={index}>\n                                    <div\n                                      className=\"OrgCard\"\n                                      onClick={() =>\n                                        newChart(JSON.stringify(item))\n                                      }\n                                    >\n                                      <div className=\"image\">\n                                        {/* {console.log(item)} */}\n                                        \n                                        <img\n                                          src={`${config.drupal_url}/${item.DP}`}\n                                          alt=\"Profile\"\n                                          style={{ borderColor: levelColor }}\n                                        ></img>\n                                      </div>\n                                      <div className=\"OrgCard-body\">\n                                        <div className=\"name-profile-container\">\n                                          <h4 title={item.name} className=\"OrgCard-body-h4\">\n                                          {item.name.length>22?item.name.split(\" \")[0]:item.name}\n                                          </h4>\n                                          <p className=\"empProfileNav\">\n                                          <a href={\"/employee-details/\" + item.emp_id} className='playBut'>\n                        <PlayArrowIcon className=\"playIcon\"></PlayArrowIcon>\n                      </a>\n                                          </p>\n                                        </div>\n                                        <p title={item.role} className=\"OrgCard-body-p\">\n                                          {item.role.length>28?(item.role.split(\" \").length===2?item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1):item.role.split(\" \")[0].substring(0,1)+item.role.split(\" \")[1].substring(0,1)+item.role.split(\" \")[2].substring(0,1)):item.role}\n                                        </p>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </Fragment>\n                              ))}\n                            </div>\n                           \n                          </ul>\n                        )\n                      ) : (\n                        <></>\n                      )}\n                    </li>\n                  </Fragment>\n                ))}\n              </ul>\n            </li>\n          </Fragment>\n        ))}\n      </ul>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}